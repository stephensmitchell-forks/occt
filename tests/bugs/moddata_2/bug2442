puts "============"
puts "OCC2442"
puts "============"
puts ""
######################################################
# Error in BRepClass3d_SolidClassifier
######################################################

restore [locate_data_file OCC2442-1.brep] a 
restore [locate_data_file OCC2442-2.brep] b 

distmini dm1 a b
set dm1_list [dump dm1_val]

explode a
explode b
distmini dm2 a_1 b_1
set dm2_list [dump dm2_val]

set good_dist 18.4816355578064

regexp {Dump of dm1_val \*+\n([-0-9.+eE]+)} $dm1_list full dist1
regexp {Dump of dm2_val \*+\n([-0-9.+eE]+)} $dm2_list full dist2

set tol_abs 1.e-7
set tol_rel 1.e-7

checkreal "Distance 1 " ${dist1} ${good_dist} ${tol_abs} ${tol_rel}
checkreal "Distance 2 " ${dist2} ${good_dist} ${tol_abs} ${tol_rel}

set boundbox [boundingstr a]
set x0 [lindex $boundbox 0]
set y0 [lindex $boundbox 1]
set z0 [lindex $boundbox 2]
ttranslate a [expr -1 * $x0] [expr -1 * $y0] [expr -1 * $z0]
ttranslate b [expr -1 * $x0] [expr -1 * $y0] [expr -1 * $z0]

checkview -display a -with b -2d -path ${imagedir}/${test_image}.png
